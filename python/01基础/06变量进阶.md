# 变量进阶

---

## 一、变量的引用

> - 变量 和 数据 都是保存在 内存 中的
> 
> - 在 Python 中 函数 的 参数传递 以及 返回值 都是靠 引用 传递的

#### 在 Python 中

- 变量 和 数据 是分开存储的

- 数据 保存在内存中的一个位置

- 变量 中保存着数据在内存中的地址

- 变量 中 记录数据的地址，就叫做 引用

- 使用 id() 函数可以查看变量中保存数据所在的 内存地址

> 注意：如果变量已经被定义，当给一个变量赋值的时候，本质上是 修改了数据的引用
> 
> - 变量 不再 对之前的数据引用
> 
> - 变量 改为 对新赋值的数据引用

    >>> a = 1
    >>> id(a)
    140716036363936
    >>> b = a
    >>> id(b)
    140716036363936
    >>> a = 2
    >>> id(a)
    140716036363968
    >>>

>  在 Python 中，函数的 实参/返回值 都是是靠 引用 来传递来的

---

### 二、变量的可变和不可变类型

- 不可变类型，内存中的数据不允许被修改：(重新赋值相当于  创建新的内存地址，改变引用)
  
  - 数字类型 int, bool, float, complex, long(2.x)
  - 字符串 str
  - 元组 tuple

- 可变类型，内存中的数据可以被修改：（用某些方法更新变量    指向的内存地址不变）,但是！！！！！！一旦使用赋值语句，还是会
  
  - 列表 list
  - 字典 dict

---

## 三、 局部变量和全局变量

- 局部变量 是在 函数内部 定义的变量，只能在函数内部使用

- 全局变量 是在 函数外部定义 的变量（没有定义在某一个函数内），所有函数 内部 都可以使用这个变量

> 提示：在其他的开发语言中，大多 不推荐使用全局变量 —— 可变范围太大，导致程序不好维护！

#### 1.局部变量

- 局部变量 是在 函数内部 定义的变量，只能在函数内部使用

- 函数执行结束后，函数内部的局部变量，会被系统回收----------->巧克力图片定义成局部变量   GUI显示的时候就不见了

- 不同的函数，可以定义相同的名字的局部变量，但是 彼此之间 不会产生影响

#### (1)局部变量的作用

- 在函数内部使用，临时 保存 函数内部需要使用的数据

#### (2)局部变量的生命周期

- 所谓 生命周期 就是变量从 被创建 到 被系统回收 的过程

- 局部变量 在 函数执行时 才会被创建

- 函数执行结束后 局部变量 被系统回收

- 局部变量在生命周期 内，可以用来存储 函数内部临时使用到的数据

#### 2.全局变量

- 全局变量 是在 函数外部定义 的变量，所有函数内部都可以使用这个变量

注意：函数执行时，需要处理变量时 会：

1. 首先 查找 函数内部 是否存在 指定名称 的局部变量，如果有，直接使用

2. 如果没有，查找 函数外部 是否存在 指定名称 的全局变量，如果有，直接使用

3. 如果还没有，程序报错！

#### (1)函数不能直接修改 全局变量的引用

- 全局变量 是在 函数外部定义 的变量（没有定义在某一个函数内），所有函数 内部 都可以使用这个变量

> 提示：在其他的开发语言中，大多 不推荐使用全局变量 —— 可变范围太大，导致程序不好维护！

- 在函数内部，可以 通过全局变量的引用获取对应的数据

- 但是，不允许直接修改全局变量的引用 —— 使用赋值语句修改全局变量的值

#### (2)在函数内部修改全局变量的值

- 如果在函数中需要修改全局变量，需要使用 global 进行声明

```py
num = 10


def demo1():

    # global 关键字，告诉 Python 解释器 num 是一个全局变量
    global num
    #，如果没有global   这 只是定义了一个局部变量，不会修改到全局变量，只是变量名相同而已
    num = 100
    print(num)


def demo2():

    print("demo2" + "-" * 50)
    print(num)

demo1()
demo2()
print("over")
```

#### (3)全局变量定义的位置

- 为了保证所有的函数都能够正确使用到全局变量，应该 将全局变量定义在其他函数的上方

#### (4)全局变量命名的建议

- 为了避免局部变量和全局变量出现混淆，在定义全局变量时，有些公司会有一些开发要求，例如：

- 全局变量名前应该增加 g_ 或者 gl_ 的前缀

> 提示：具体的要求格式，各公司要求可能会有些差异
