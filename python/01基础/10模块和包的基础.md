# 模块和包的基础

---

## 一、模块

#### 1.的两种导入方式

#### 1）import 导入

import 模块名1, 模块名2

> 提示：在导入模块时，每个导入应该独占一行

import 模块名1import 模块名2

- 导入之后

- 通过 模块名. 使用 模块提供的工具 —— 全局变量、函数、类

###### 使用 as 指定模块的别名

> 如果模块的名字太长，可以使用 as 指定模块的名称，以方便在代码中的使用

import 模块名1 as 模块别名

> 注意：模块别名 应该符合 大驼峰命名法

#### 2）from...import 导入

###### 从 模块 导入 某一个工具from 模块名1 import 工具名

注意

> 如果 两个模块，存在 同名的函数，那么 后导入模块的函数，会 覆盖掉先导入的函数

- 开发时 import 代码应该统一写在 代码的顶部，更容易及时发现冲突

- 一旦发现冲突，可以使用 as 关键字 给其中一个工具起一个别名

###### from...import *（知道）

###### 从 模块 导入 所有工具from 模块名1 import *

注意

> 这种方式不推荐使用，因为函数重名并没有任何的提示，出现问题不好排查

#### 2.模块的搜索顺序[扩展]

Python 的解释器在 导入模块 时，会：

1. 搜索 当前目录 指定模块名的文件，如果有就直接导入

2. 如果没有，再搜索 系统目录

> 在开发时，给文件起名，不要和 系统的模块文件 重名

Python 中每一个模块都有一个内置属性 __file__ 可以 查看模块 的 完整路径

示例

> 注意：如果当前目录下，存在一个 random.py 的文件，程序就无法正常执行了！

- 这个时候，Python 的解释器会 加载当前目录 下的 random.py 而不会加载 系统的 random 模块

#### 3.原则 —— 每一个文件都应该是可以被导入的

- 一个 独立的 Python 文件 就是一个 模块

- 在导入文件时，文件中 所有没有任何缩进的代码 都会被执行一遍！

实际开发场景

- 在实际开发中，每一个模块都是独立开发的，大多都有专人负责

- 开发人员 通常会在 模块下方 增加一些测试代码

- 仅在模块内使用，而被导入到其他文件中不需要执行

#### 4.\_\_name\_\_ 属性

> - \_\_name\_\_ 属性可以做到，测试模块的代码 只在测试情况下被运行，而在 被导入时不会被执行！

- __name__ 是 Python 的一个内置属性，记录着一个 字符串

- 如果 是被其他文件导入的，__name__ 就是 模块名

- 如果 是当前执行的程序 __name__ 是 __main__

在很多 Python 文件中都会看到以下格式的代码：

```py
# 导入模块# 定义全局变量# 定义类# 定义函数

# 在代码的最下方

def main():

    pass

# 根据 __name__ 判断是否执行下方代码

if __name__ == "__main__":

    main()   #_main_和main()没有关系   只要是调试本模块  _name_的值就等于_main_  满足条件  if底下的语句就会执行

    #但是写个main（）可能会比较好看
```

---

## 二、包（Package）

- 包 是一个 包含多个模块 的 特殊目录

- 目录下有一个 特殊的文件 \_\_init\_\_.py

- 包名的 命名方式 和变量名一致，小写字母 + _

好处

- 使用 import 包名 可以一次性导入 包 中 所有的模块

###### \_\___init_\_\_.py ------>这个放在包里面

- 要在外界使用 包 中的模块，需要在 \_\_init\_\_.py 中指定 对外界提供的模块列表

```py
#从 当前目录 导入 模块列表

from . import send_message

from . import receive_message  #  . 表示当前目录
```

#### 1.发布模块（知道）

- 如果希望自己开发的模块，分享 给其他人，可以按照以下步骤操作

#### 1) 创建 setup.py    ------->这个文件放在包的【文件夹】的同级目录

- setup.py 的文件

```py
from distutils.core import setup

setup(name="hm_message", # 包名

version="1.0", # 版本

description="itheima's 发送和接收消息模块", # 描述信息

long_description="完整的发送和接收消息模块", # 完整描述信息

author="itheima", # 作者

author_email="[itheima@itheima.com](mailto:itheima@itheima.com)", # 作者邮箱

url="[www.itheima.com](http://www.itheima.com/)", # 主页

py_modules=["hm_message.send_message",

"hm_message.receive_message"])
```

#### 2) 构建模块

$ python3 setup.py build

#### 3) 生成发布压缩包

$ python3 setup.py sdist

> 注意：要制作哪个版本的模块，就使用哪个版本的解释器执行！
